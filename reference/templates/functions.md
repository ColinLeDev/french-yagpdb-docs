---
description: Functions are underappreciated. In general, not just in templates. // Rob Pike
---

# Functions

### Current User

| **Function**            | **Description**                                                                                                 |
| ----------------------- | --------------------------------------------------------------------------------------------------------------- |
| `currentUserCreated`    |  Returns value of type _time.Time_ and shows when the current user was created.                                 |
| `currentUserAgeHuman`   | <p> The account age of the current user in more human readable format <br>(Eg:<code>3 days 2 hours</code>).</p> |
| `currentUserAgeMinutes` |  The account age of the current user in minutes.                                                                |

### ExecCC

{% hint style="warning" %}
`execCC` calls are limited to 1 / CC for non-premium users and 10 / CC for premium users.
{% endhint %}

| **Function**                                   | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| ---------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `execCC ccID channel delay data`               | Function that executes another custom command specified by `ccID,`max recursion depth is 2 (using `.StackDepth` shows the current depth) and it's rate-limited strictly at max 10 delayed custom commands executed per channel per minute, if you go over that it will be simply thrown away. Argument `channel` can be `nil`, channel's ID or name. The`delay` argument is execution delay of another CC is in seconds. The `data` argument is content that you pass to the other executed custom command. To retrieve that `data` you use `.ExecData`. This example is important > [execCC example](https://docs.yagpdb.xyz/reference/custom-command-examples#countdown-example-exec-cc) also next snippet which shows you same thing run using the same custom command > [Snippets](functions.md#execcc-sections-snippets). |
| `scheduleUniqueCC ccID channel delay key data` | <p>Same as <code>execCC</code>except there can only be 1 scheduled cc execution per server per key, if key already exists then it is overwritten with the new data and delay (as above, in seconds).</p><p>An example would be a mute command that schedules the unmute action sometime in the future. However, let's say you use the unmute command again on the same user, you would want to override the last scheduled unmute to the new one. This can be used for that.</p>                                                                                                                                                                                                                                                                                                                                               |
| `cancelScheduledUniqueCC ccID key`             | Cancels a previously scheduled custom command execution using `scheduleUniqueCC`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |

#### ExecCC section's snippets:

* To demonstrate execCC  and .ExecData using the same CC.

```go
{{ $yag := "YAGPDB rules! " }}
{{ $ctr := 0 }} {{ $yourCCID := .CCID }}
{{ if .ExecData }}
    {{ $ctr = add .ExecData.number 1 }}
    {{ $yag = joinStr "" $yag $ctr }} {{ .ExecData.YAGPDB }}
{{ else }} 
    So, someone rules.
    {{ $ctr = add $ctr 1 }} {{ $yag = joinStr "" $yag 1 }}
{{ end }}
{{ if lt $ctr 5 }}
    {{ execCC $yourCCID nil 10 (sdict "YAGPDB" $yag "number" $ctr) }}
{{ else }} FUN'S OVER! {{ end }}
```

### Math functions

| **Function**                    | **Description**                                                                                                                                                                                                                                                                                                                                                        |
| ------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `add x y z ...`                 | Returns x + y + z + ...,  detects first number's type - is it _int_ or _float_ and based on that adds. (use `toFloat` on the first argument to force floating point math.)`{{add 5 4 3 2 -1}}` sums all these numbers and returns `13`.                                                                                                                                |
| `sub x y z ...`                 | Returns x - y -z - ... Works like add, just subtracts.                                                                                                                                                                                                                                                                                                                 |
| `mult x y z ...`                | Multiplication, like `add` or `div`, detects first number's type. `{{mult 3.14 2}}` returns `6.28`                                                                                                                                                                                                                                                                     |
| `div x y z ...`                 | Division, like `add` or `mult`, detects first number's type first. `{{div 11 3}}` returns `3` whereas `{{div 11.1 3}}` returns  `3.6999999999999997`                                                                                                                                                                                                                   |
| `fdiv x y z ...`                | Meant specifically for floating point numbers division.                                                                                                                                                                                                                                                                                                                |
| `log x base`                    | Log is a logarithm function using (log base of x). Arguments can be any type of numbers, as long as they follow logarithm logic. Return value is of type _float64_. If base argument is not given It is using natural logarithm (base e - The Euler's constant) as default, also is the default to change the base.`{{ log "123" 2 }}` will return `6.94251450533924`. |
| `mod x y`                       | Mod returns the floating-point remainder of x/y. `mod 17 3` returns `2` of type _float64_.                                                                                                                                                                                                                                                                             |
| `pow x y`                       | Pow returns x\*\*y, the base-x exponential of y which have to be both numbers. Type is returned as _float64_. `{{ pow 2 3 }}` returns `8`.                                                                                                                                                                                                                             |
| `randInt (stop, or start stop)` | <p>Returns a random integer between 0 and stop, or start - stop if two args are provided.</p><p>Result will be <code>start &#x3C;= random number &#x3C; stop</code>. Example in section's <a href="functions.md#math-sections-snippets">Snippets</a>.</p>                                                                                                              |
| `round`                         | Returns the nearest integer, rounding half away from zero. Regular rounding > 10.4 is `10` and 10.5 is `11`. All round functions return type _float64_, so use conversion functions to get integers. For more complex rounding, example in section's [Snippets](functions.md#math-sections-snippets).                                                                  |
| `roundCeil`                     | Returns the least integer value greater than or equal to input or rounds up.  `{{roundCeil 1.1}}` returns `2`.                                                                                                                                                                                                                                                         |
| `roundFloor`                    | Returns the greatest integer value less than or equal to input or rounds down. `{{roundFloor 1.9}}` returns `1`.                                                                                                                                                                                                                                                       |
| `roundEven`                     | <p>Returns the nearest integer, rounding ties to even.<br><code>{{roundEven 10.5}}</code> returns <code>10 {{roundEven 11.5}}</code> returns <code>12</code>.</p>                                                                                                                                                                                                      |
| `sqrt`                          | <p>Returns the square root of a number as type <em>float64</em>.<br><code>{{sqrt 49}}</code> returns <code>7, {{sqrt 12.34 | printf "%.4f"}} returns 3.5128</code></p>                                                                                                                                                                                                 |

#### Math section's snippets:

* `{{$d := randInt 10}}` Stores random _int_ into variable `$d` (a random number from 0-9).
* To demonstrate rounding float to 2 decimal places.\
  `{{div (round (mult 12.3456 100)) 100}}` returns 12.35\
  `{{div (roundFloor (mult  12.3456 100)) 100}}` returns 12.34

### Mentions

| **Function**                 | **Description**                                                          |
| ---------------------------- | ------------------------------------------------------------------------ |
| `mentionEveryone`            | Mentions `@everyone`.                                                    |
| `mentionHere`                | Mentions `@here`.                                                        |
| `mentionRoleName "rolename"` | Mentions the first role found with the provided name (case-insensitive). |
| `mentionRoleID roleID`       | Mentions the role found with the provided ID.                            |

#### Mentions section's snippets:

* `<@{{.User.ID}}>` Outputs a mention to the user that called the command and is the same as `{{.User.Mention}}`
* `<@###########>` Mentions the user that has the ID ###### (See [How to get IDs](./#how-to-get-ids) to get ID).
* `<#&&&&&&&&&&&>` Mentions the channel that has ID &&&&&& (See [How to get IDs](./#how-to-get-ids) to get ID).
* `<@&##########>` Mentions the role with ID ######## ([listroles](../../commands/all-commands.md#listroles) command gives roleIDs). This is usable for example with `{{sendMessageNoEscape nil "Welcome to role <@&11111111...>"}}`. Mentioning that role has to be enabled server- side in Discord.

### Message functions

| **Function**                                               | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| ---------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `addMessageReactions channel messageID emojis...`          | Same as `addReactions` or `addResponseReactions`, but can be used on any messages using its ID. `channel` can be either `nil`, channel's ID or its name. Example in section's [Snippets](functions.md#message-sections-snippets).                                                                                                                                                                                                                                                                                                                                                                                                          |
| `addReactions "👍" "👎" ...`                               | Adds each emoji as a reanction to the message that triggered the command (recognizes Unicode emojis and `emojiName:emojiID`).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `addResponseReactions "👍" "👎" ...`                       | Adds each emoji as a reaction to the response message (recognizes Unicode emojis and `emojiName:emojiID`).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `complexMessage "content" args "embed" args "file" args`   | `complexMessage` creates a _so-called_ bundle of different message fields for `sendMessage...` functions to send them out all together. Its arguments need to be preceded by predefined keys `"content"` for regular text, `"embed"` for embed arguments created by `cembed` or `sdict`, `"file"` for printing out content as a file (max 100 000 characters ca100kB). Example in this section's [Snippets](functions.md#message-sections-snippets).                                                                                                                                                                                       |
| `complexMessageEdit "content" args "embed" args`           | Special case for `editMessage` function - either if `complexMessage` is involved or works even with regular message. Has two parameters `"content"` and `"embed"` to edit regular text part or embed part. If `"embed"` is set to `nil`, it deletes whole embed. Example in this section's [Snippets](functions.md#message-sections-snippets).                                                                                                                                                                                                                                                                                             |
| `deleteAllMessageReactions channel messageID (emojis...)`  | Deletes all reactions pointed message has. `channel` can be ID, "name" or `nil`. `emojis` argument is optional and works like it's described for the function `deleteMessageReaction`.                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `deleteMessageReaction channel messageID userID emojis...` | <p>Deletes reaction(s) from a message. <code>channel</code> can be ID, "name" or <code>nil</code>. <br><code>emojis</code> argument can be up to 10 emojis, syntax is <code>emojiName</code> for Unicode/Discord's default emojis and <code>emojiName:emojiID</code> for custom emotes.  <br>Example: <code>{{deleteMessageReaction nil (index .Args 1) .User.ID "👍" "👎"}}</code> will delete current user's reactions with thumbsUp/Down emotes from current running channel's message which ID is given to command as first argument <code>(index .Args 1)</code>.<br>Also usable with <a href="./#reaction">Reaction trigger</a>.</p> |
| `deleteMessage channel messageID (delay)`                  | Deletes message with given `messageID` from `channel`. Channel can be either `nil`, channel's ID or its name. `(delay)` is optional and like following two delete functions, it defaults to 10 seconds, max being 1 day or 86400 seconds. Example in section's [Snippets](functions.md#message-sections-snippets).                                                                                                                                                                                                                                                                                                                         |
| `deleteResponse (delay)`                                   | Deletes the response after a certain time from optional `delay` argument (max 86400 seconds = 1 day). Defaults to 10 seconds.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `deleteTrigger (delay)`                                    | Deletes the trigger after a certain time from optional `delay` argument  (max 86400 seconds = 1 day). Defaults to 10 seconds.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `editMessage channel messageID newMessageContent`          | Edits the message in channel, channel can be either `nil`, channel's ID or "name". Light example in section's [Snippets](functions.md#message-sections-snippets).                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `editMessageNoEscape channel messageID newMessageContent`  | Edits the message in channel and has same logic in escaping characters as `sendMessageNoEscape`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `getMessage channelID messageID`                           | Returns a [Message ](./#message)object.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `sendDM "message here"`                                    | Sends the user a direct message, only one DM can be sent per custom command (accepts embed objects). YAG will only DM triggering user.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `sendMessage channel message`                              | Sends `message (string or embed)` in `channel`, channel can be either `nil`, the channel ID or the channel's "name".                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `sendMessageNoEscape channel message`                      | Sends `message (string or embed)` in `channel`, channel can be either `nil`, the channel ID or the channel "name". Doesn't escape mentions (e.g. role mentions or @here/@everyone).                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `sendMessageRetID channel message`                         | Same as `sendMessage`, but also returns messageID to assigned variable for later use. Example in section's [Snippets](functions.md#message-sections-snippets).                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `sendMessageNoEscapeRetID channel message`                 | Same as `sendMessageNoEscape`, but also returns messageID to assigned variable for later use.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |

#### Message section's snippets:

*   Sends message to current channel `nil` and gets messageID to variable `$x`. Also adds reactions to this message. After 5 seconds, deletes that message. >

    `{{$x := sendMessageRetID nil "Hello there!"}} {{addMessageReactions nil $x "👍" "👎"}} {{deleteMessage nil $x 5}}`
* To demonstrate `sleep` and slightly also `editMessage` functions. >\
  `{{$x := sendMessageRetID nil "Hello"}} {{sleep 3}} {{editMessage nil $x "There"}} {{sleep 3}} {{sendMessage nil "We all know, that"}} {{sleep 3}} YAGPDB rules!`
* To demonstrate usage of `complexMessage` with `sendMessage`. `{{sendMessage nil (complexMessage "content" "Who rules?" "embed" (cembed "description" "YAGPDB of course!" "color" 0x89aa00) "file" "Here we print something nice - you all are doing awesome!")}}`
* To demonstrate usage of `complexMessageEdit` with `editMessage`.\
  `{{$mID := sendMessageRetID nil (complexMessage "content" "You know what is..." "embed" (cembed "title" "FUN!?" "color" 0xaa8900))}} {{sleep 3}} {{editMessage nil $mID (complexMessageEdit "embed" (cembed "title" "YAGPDB!" "color" 0x89aa00) "content" "Yes, it's always working with...")}}{{sleep 3}}{{editMessage nil $mID (complexMessageEdit "embed" nil "content" "Embed deleted, goodbye YAG!")}}{{deleteMessage nil $mID 3}}`

### Miscellaneous

| **Function**                                    | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| ----------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `adjective`                                     | Returns a random adjective.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `cembed "list of embed values"`                 | Function to generate embed inside custom command. [More in-depth here](../../others/custom-embeds.md#embeds-in-custom-commands).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `cslice, sdict`                                 | These functions are covered in their own section [here](./#custom-types).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `dict key1 value1 key2 value2 ...`              | Creates an unordered collection of key-value pairs, a dictionary so to say. The number of parameters to form key-value pairs must be even. Example [here](https://docs.yagpdb.xyz/reference/custom-command-examples#dictionary-example). Keys and values can be of any type. Key is not restricted to _string_ only as in case with `sdict`. `dict` also has helper methods .Del, .Get and .Set and they function the same way as `sdict` ones discussed [here](./#templates-sdict).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `exec "command" "args" "args" "args" ...`       | <p>Executes a YAGPDB command (e.g. roll, kick etc) in a custom command. Exec can be run max 5 times per command. If real command returns an embed - <code>exec</code> will return raw data of type embed, so you can use embed fields for better formatting - e.g. <code>{{$resp := exec "whois"}} {{$resp.Title}} Joined at > {{(index $resp.Fields 4).Value}}</code> will return the title (username#discriminator) and "Joined at" field's value from <code>whois</code> command. <strong>NB!</strong> This will not work for un/nn commands!</p><p></p><p>exec syntax is <code>exec "command" arguments</code> - this means you format it the same way as you would type the command regularly, just without the prefix, e.g. if you want to clear 2 messages and avoiding the pinned message > <code>{{exec "clear 2 -nopin"}}</code>, where <code>"command"</code> part is whole <code>"clear 2 -nopin"</code>. If you change that number inside CC somewhere then you have to use <code>arguments</code> part of exec formatting > <code>{{$x := 2}} {{exec "clear" $x "-nopin"}}</code> Here <code>"clear"</code> is the <code>"command"</code> and it is followed by <code>arguments</code>, one variable <code>$x</code> and one string <code>"-nopin"</code>. Last example is the same as <code>{{exec (joinStr " " "clear" $x "-nopin")}}</code>(also notice the space in <code>joinStr</code> separator).</p> |
| `execAdmin "command" "args" "args" "args" ...`  | Functions same way as `exec` but effectively runs the command as the bot user (YAGPDB). This has essentially the same effect as if a user with the same permissions and roles as YAGPDB ran the command: for example, if YAGPDB had ban members permission but the user which ran the command did not, `{{exec "ban" 12345}}` would error due to insufficient permissions but `{{execAdmin "ban" 12345}}` would succeed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `hasPrefix string prefix`                       | `hasPrefix` tests whether the given `string` begins with `prefix` and returns _bool_. Example > `{{hasPrefix "YAGPDB" "YAG"}}` returns `true`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `hasSuffix string suffix`                       | <p>hasSuffix tests whether the given <code>string</code> ends with <code>suffix</code> and returns <em>bool</em>.</p><p>Example > <code>{{hasSuffix "YAGPDB" "YAG"}}</code> returns <code>false</code>.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `humanizeThousands arg`                         | This function places comma to separate groups of thousands of a number. `arg` can be _int_ or _string_, has to be a whole number, e.g. `{{humanizeThousands "1234567890"}}` will return `1,234,567,890`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `in list value`                                 | Returns _bool_ true/false whether case-sensitive value is in list/_slice_. `{{ in (cslice "YAGPDB" "is cool") "yagpdb" }}` returns `false`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `index arg ...keys`                             | <p>Returns the result of indexing its first argument by the following arguments. Each indexed item must be a <em>map</em>, <em>slice</em> or <em>array</em>. </p><p></p><p>Example:  <code>{{index .Args 1}}</code> returns first argument after trigger which is always at position 0. </p><p></p><p>More than one positional keys can be used, in pseudo-code: </p><p><code>index X 0 1</code> is equivalent to calling <code>index (index X 0) 1</code></p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `inFold list value`                             | Same as `in`, but is case-insensitive. `{{inFold (cslice "YAGPDB" "is cool") "yagpdb"}}` returns `true`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `kindOf value (flag)`                           | This function helps to determine what kind of data type we are dealing with. `flag` part is a _bool_ and if set as **true** (**false** is optional) **** returns the value where given `value` points to. Example: `{{kindOf cembed false}} {{kindOf cembed true}}` will return `ptr` and `struct`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `len arg`                                       | <p>Returns the integer length of its argument. arg can be an <em>array</em>, <em>slice</em>, <em>map</em>, or <em>string.</em></p><p><code>{{ len (cslice 1 2 3) }}</code></p><p>returns <code>3</code>.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `noun`                                          | Returns a random noun.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `parseArgs required_args error_message ...carg` | <p>Checks the arguments for a specific type. Has methods <code>.Get</code> and <code>.IsSet</code>. </p><p><code></code><br><code>carg "type" "name"</code> is required by <code>parseArgs</code> and it defines the type of argument for <code>parseArgs</code>. </p><p></p><p><a href="https://docs.yagpdb.xyz/commands/custom-commands#require-arguments">More in depth here</a> and an example in <a href="../custom-command-examples.md#parseargs-example">Custom Command Examples.</a></p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `range slice/array`                             | Iterates (loops) over the given _slice_ or _array_ and sets successive elements as active data (the dot) to be further handled inside the `range` action. Example usage [here](../custom-command-examples.md#range-example). [More in-depth here](./#range-action).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `sendTemplate channel templateName data`        | <p>Function sends a formulated template to another channel.<br>Channel is like always either name, number or nil; and returns messageID.</p><p>Example: <code>{{define "logsTemplate"}}This text will output on different channel, you can also use functions like {{currentTime}}. {{.TemplateArgs}} would be additional data sent out. {{end}}</code></p><p>Now we call that "logs" in the same custom command.<code>{{sendTemplate "logs" "logsTemplate" "YAG rules!"}}</code></p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `sendTemplateDM templateName data`              | Works the same way as function above. Only channel's name is not in the arguments. YAGPDB **will only** DM the triggering user.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `seq start stop`                                | Creates a new _slice_ of type _int_, beginning from start number, increasing in sequence and ending at stop (not included). `{{seq -4 2}}` returns a _slice_ `[ -4 -3 -2 -1 0 1 ]`. Sequence's max length is 10 000.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `sort slice (...args)`                          | <p>Sorts a slice with optional arguments. Numbers are sorted before strings. Arguments are presented in a <code>sdict</code> as keys having bool values. Example > <code>{{sort (cslice "YAGPDB" 42 "Alphabet" 111 33.3) (sdict "reverse" true "subslices" true "emptyslices" false)}}</code>would return <code>[111 42 33.3 YAGPDB Alphabet]</code></p><p>Argument keys: </p><p><code>"reverse"</code> reverses the order if <code>true</code>.</p><p><code>"subslices"</code> makes the function return a set of subslices based on input type/kind if <code>true</code>.</p><p><code>"Emptyslices"</code> returns all possible slices if <code>true</code>, helpful for indexing.<br><br>Sort function is limited to 1/3 CC calls regular/premium.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `shuffle list`                                  | Returns a shuffled, randomized version of a list/_slice_.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `sleep seconds`                                 | Pauses execution of template's action-structure inside custom command for max 60 seconds combined. Argument`seconds`is an integer (whole number). Example in [Snippets](./#miscellaneous-snippets).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |

### Role functions

| **Function**                             | **Description**                                                                                                                                                                                                                  |
| ---------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `addRoleID roleID`                       | Adds the role with the given ID to the user that triggered the command (use the `listroles` command for a list of roles).                                                                                                        |
| `addRoleName roleName`                   | Adds the role with given name to the user that triggered the command (use the `listroles` command for a list of roles).                                                                                                          |
| `getRole role`                           | Returns a [role object](https://discord.com/developers/docs/topics/permissions#role-object) of type _\*discordgo.Role._ `role`  can be either role's ID or role's name.                                                          |
| `giveRoleID userID roleID`               | Gives a role by ID to the target.                                                                                                                                                                                                |
| `giveRoleName userID "roleName"`         | Gives a role by name to the target.                                                                                                                                                                                              |
| `hasRoleID roleID`                       | Returns true if the user has the role with the specified ID (use the listroles command for a list of roles).                                                                                                                     |
| `hasRoleName "rolename"`                 | Returns true if the user has the role with the specified name (case-insensitive).                                                                                                                                                |
| `removeRoleID roleID (delay)`            | Removes the role with the given ID from the user that triggered the command (use the listroles command for a list of roles). `Delay` is optional argument in seconds.                                                            |
| `removeRoleName roleName (delay)`        | Removes the role with given name from the user that triggered the command (use the listroles command for a list of roles). `Delay` is optional argument in seconds.                                                              |
| `setRoles userID roles`                  | Overwrites the roles of the given user using the slice of roles provided, which should be a slice of role IDs. IDs can be ints or strings. Example: `{{setRoles .User.ID cslice}}` would clear the roles of the triggering user. |
| `takeRoleID userID roleID (delay)`       | Takes away a role by ID from the target. `Delay` is optional argument in seconds.                                                                                                                                                |
| `takeRoleName userID "roleName" (delay)` | Takes away a role by name from the target. `Delay` is optional argument in seconds.                                                                                                                                              |
| `targetHasRoleID userID roleID`          | Returns true if the given user has the role with the specified ID (use the listroles command for a list of roles). Example in section's [Snippets](functions.md#role-sections-snippets).                                         |
| `targetHasRoleName userID "roleName"`    | Returns true if the given user has the role with the specified name (case-insensitive).                                                                                                                                          |

#### Role section's snippets:

* To demonstrate usage of `targetHasRoleID`. > \
  `{{$x := (userArg (index .Args 1)).ID}} {{if targetHasRoleID $x ############}} Has the Role! {{else}} Does not have the role! {{end}}`

### String manipulation

| **Function**                                         | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ---------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `joinStr "separator" "str1" (arg1)(arg2) "str2" ...` | Joins several strings into one, separated by the first argument`"separator"`, example:`{{joinStr "" "1" "2" "3"}}` returns `123`. Also if functions have _string, \[]string_ or easily convertible return, they can be used inside `joinStr` e.g. `{{joinStr "" "Let's calculate " (add (mult 13 3) 1 2) ", was returned at " (currentTime.Format "15:04") "."}}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `lower "string"`                                     | Converts the string to lowercase.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `print, printf, println`                             | <p>These are GO template package's predefined functions and are aliases for <a href="https://golang.org/pkg/fmt/#Sprint">fmt.Sprint</a>, <a href="https://golang.org/pkg/fmt/#Sprint">fmt.Sprintf</a> and <a href="https://golang.org/pkg/fmt/#Sprintln">fmt.Sprintln</a>. Formatting is also discussed <a href="https://golang.org/pkg/fmt/#hdr-Printing">here</a>. <code>printf</code> cheat sheet <a href="https://yourbasic.org/golang/fmt-printf-reference-cheat-sheet/">here</a>.<br><br><code>printf</code> is usable for example to determine the type of the value > <code>{{printf "%T" currentTime}}</code> outputs <code>currentTime</code> functions output value type of <code>time.Time</code>. In many cases, <code>printf</code> is a great alternative to <code>joinStr</code> for concatenate strings.</p>                                                                |
| `reFind "regex" "string"`                            | Compares "string" to regex pattern and returns first match. `{{reFind "AG" "YAGPDB is cool!"}}`returns `AG` (regex pattern is case sensitive).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `reFindAll "regex" "string" (count)`                 | Adds all regex matches from the "string" to a _slice_. Example in section's [Snippets](functions.md#string-manipulation-sections-snippets). Optional `count` determines how many matches are made. **Example:** `{{reFindAll "a*" "abaabaccadaaae" 4}}` would return `[a aa a ].`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `reFindAllSubmatches "regex" "string" (count)`       | Returns whole-pattern matches and also the sub-matches within those matches as _slices_ inside a _slice_. `{{reFindAllSubmatches "(?i)y([a-z]+)g" "youngish YAGPDB"}}` returns `[[young oun] [YAG A]]` (regex pattern here is case insensitive). Optional `count` works the same way as for `reFindAll`. So example above with `count` set to 1 would return `[[young oun]].`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `reReplace "regex" "string1" "string2"`              | Replaces "string1" contents with "string2" at regex match point. `{{reReplace "I am" "I am cool!" "YAGPDB is"}}`returns `YAGPDB is cool!` (regex pattern here is case sensitive).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `reSplit "regex" "string" (count)`                   | <p><code>reSplit</code> slices <code>string</code> into substrings separated by the <code>regex</code> expression and returns a <em>slice</em> of the substrings between those expression matches. The optional <code>count</code> determines the number of substrings to return. If <code>count</code> is negative number the function returns all substrings, if 0 then none. If <code>count</code> is bigger than 0 it returns at most n substrings, the last substring being the unsplit remainder.</p><p><strong>Example:</strong> <code>{{ $x := reSplit "a" "yagpdb has a lot of fame" 5}}</code></p><p><code>{{$x}} {{index $x 3}}</code> would return <code>[y gpdb h s lot of f me]</code> and <code>lot of f.</code></p>                                                                                                                                                          |
| `slice "string"\|slice integer (integer2)`           | <p>Function's first argument must be of type <em>string</em> or <em>slice</em>.</p><p>Outputs the "string" after cutting/slicing off integer (numeric) value of symbols (actually starting the string's index from integer through integer2) - e.g. <code>{{slice "Fox runs" 2}}</code>outputs <code>x runs</code>. When using also integer2 - e.g. <code>{{slice "Fox runs" 1 7}}</code>, it outputs <code>ox run</code>. For slicing whole arguments, let's say words, see example in section's <a href="functions.md#string-manipulation-sections-snippets">Snippets</a>. </p><p></p><p>This <code>slice</code> function is not the same as basic dynamically-sized <em>slice</em> data type discussed in this reference doc. Also it's custom, not having 3-indices as the default one from <a href="https://golang.org/pkg/text/template/#hdr-Functions">text/template</a> package.</p> |
| `split "string" "sepr"`                              | Splits given `"string"` to substrings separated by `"sepr"`arg and returns new _slice_ of the substrings between given separator e.g. `{{split "YAG, is cool!" ","}}` returns `[YAG  is cool!]` _slice_ where `YAG` is at `index` position 0 and `is cool!` at `index` position 1. Example also in section's [Snippets](functions.md#string-manipulation-sections-snippets).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `title "string"`                                     | Returns string with the first letter of each word capitalized.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `upper "string"`                                     | Converts the string to uppercase.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `urlescape "string"`                                 | Escapes the _string_ so it can be safely placed inside a URL path segment - e.g. "Hello, YAGPDB!" becomes "Hello%2C%20YAGPDB%21"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |

{% hint style="info" %}
Special information we can include in the string is _escape sequences_. Escape sequences are two (or more) characters, the first of which is a backslash `\`, which gives the remaining characters special meaning - let's call them metacharacters. The most common escape sequence you will encounter is `\n`, which means "newline".&#x20;
{% endhint %}

{% hint style="info" %}
With regular expression patterns - when using quotes you have to "double-escape" metacharacters starting with backslash. You can use backquotes/ticks to simplify this:`{{reFind "\\d+" (toString 42)}}` versus ``{{reFind `\d+` (toString 42)}}``
{% endhint %}

#### String manipulation section's snippets:

* `{{$args:= (joinStr " " (slice .CmdArgs 1))}}` Saves all the arguments except the first one to a variable `$args`.&#x20;
* To demonstrate usage of `split` function. >\
  `{{$x := "Hello, World, YAGPDB, here!"}} {{range $k, $v := (split $x ", ")}}Word {{$k}}: __{{$v}}__ {{end}}`
* To demonstrate usage of `reFindAll`. > \
  `Before regex: {{$msg := "1 YAGPDB and over 100000 servers conquered."}} {{$re2 := reFindAll "[0-9]+" $msg}} {{$msg}}`  \
  `After regex matches: {{joinStr " " "Only" (index $re2 0) "YAGPDB and already" (index $re2 1) "servers captured."}}`

### Tickets

{% hint style="warning" %}
Ticket functions are limited to 1 call per custom command for both normal and premium guilds.
{% endhint %}

| **Function**                | **Description**                                                                                                                                                                                                                                                                           |
| --------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `createTicket author topic` | Creates a new ticket with the author and topic provided. Author can be `nil` (to use the triggering member); user ID in form of a string or an integer; a user struct; or a member struct. The topic must be a string. Returns a [template ticket](./#template-ticket) struct on success. |

#### Template Ticket

| **Field**              | **Description**                                                                                               |
| ---------------------- | ------------------------------------------------------------------------------------------------------------- |
| .AuthorID              | Author ID of the ticket.                                                                                      |
| .AuthorUsernameDiscrim | The Discord tag of the author of the ticket, formatted like `username#discrim`.                               |
| .ChannelID             | Channel ID of the ticket.                                                                                     |
| .ClosedAt              | Time that the ticket was closed, of type _null.Time._ This is, for the most part, useless in custom commands. |
| .CreatedAt             | Time that the ticket was created.                                                                             |
| .GuildID               | Guild ID of the ticket.                                                                                       |
| .LocalID               | The ticket ID.                                                                                                |
| .LogsID                | Log ID of the ticket.                                                                                         |
| .Title                 | Title of the ticket.                                                                                          |

### Time functions

| **Function**                                           | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| ------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `currentTime`                                          | Gets the current time, value is of type _time.Time_ which can be used in a custom embed. More info [here](../../commands/custom-commands.md#currenttime-template).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `formatTime Time ("layout arg")`                       | Outputs given time in RFC822 formatting, first argument `Time` shows it needs to be of type _time.Time_, also with extra layout if second argument is given - e.g. `{{formatTime currentUserCreated "3:04PM"}}` would output `11:22AM` if that would have been when user was created. Layout argument is covered [here](https://pkg.go.dev/time#pkg-constants).                                                                                                                                                                                                                                                                                                                                                                                             |
| `humanizeDurationHours`                                | Returns given integer (whole number) or _time.Duration_ argument in nanoseconds in human readable format - as how long it would take to get towards given time - e.g. `{{humanizeDurationHours 9000000000000000000}}` returns `285 years 20 weeks 6 days and 16 hours`. More in [Snippets](functions.md#time-sections-snippets).                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `humanizeDurationMinutes`                              | Sames as `humanizeDurationHours`, this time duration is returned in minutes - e.g. `{{humanizeDurationMinutes 3500000000000}}` would return `58 minutes`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `humanizeDurationSeconds`                              | Sames as both humanize functions above, this time duration is returned in seconds - e.g. `{{humanizeDurationSeconds 3500000000000}}` would return `58 minutes and 20 seconds`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `humanizeTimeSinceDays`                                | Returns time passed since given argument of type _time.Time_ in human readable format - e.g. `{{humanizeTimeSinceDays currentUserCreated}}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `newDate year month day hour minute second (timezone)` | <p>Returns new type <em>time.Time</em> object in UTC using given syntax (all arguments need to be of type <em>int</em>), for example > <code>{{humanizeDurationHours ((newDate 2059 1 2 12 34 56).Sub currentTime)}}</code> will give you how much time till year 2059 January 2nd 12:34:56. More examples in <a href="functions.md#time-sections-snippets">Snippets</a>. </p><p><code>timezone</code> is an optional string argument which uses golang's <a href="https://golang.org/pkg/time/#LoadLocation">LoadLocation </a>function and <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">ZONEINFO syntax.</a>  For example: <code>{{newDate 2020 4 20 12 34 56 "Atlantic/Reykjavik"}}</code> would return that time in GMT+0.</p> |

{% hint style="info" %}
Discord Timestamp Styles referenced [here](https://discord.com/developers/docs/reference#message-formatting-timestamp-styles) can be done using `print` function e.g.

`{{print "<t:" currentTime.Unix ":F>"}}` for "Long Date/Time" formatting.
{% endhint %}

#### Time section's snippets:

* To demonstrate `humanizeDurationHours` and also how to parse a timestamp, output will be like `whois` command shows user's _join server age_.\
  `{{humanizeDurationHours (currentTime.Sub .Member.JoinedAt.Parse)}}`
* To demonstrate `newDate` to get Epoch times.\
  `{{$unixEpoch := newDate 1970 1 1 0 0 0}} in seconds > {{$unixEpoch.Unix}}`\
  `{{$discordEpoch := newDate 2015 1 1 0 0 0}} in seconds > {{$discordEpoch.Unix}}`

### Type conversion

| **Function**           | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                             |
| ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `json value`           | Traverses given `value` through MarshalJSON ([more here](https://golang.org/pkg/encoding/json/#Marshal)) and returns it as type _string_. For example `{{json .TimeHour}}` outputs type _string_; before this `.TimeHour` was of type _time.Duration_. Basically it's good to use if multistep type conversion is needed `(toString (toInt value) )` and certain parts of `cembed` need this for example.                                   |
| `structToSdict struct` | Function converts exported field-value pairs of a _struct_ to an _sdict_. For example it is useful for editing embeds, rather than having to reconstruct the embed field by field manually. Exampe: `{{$x := cembed "title" "Something rules!" "color" 0x89aa00}} {{$x.Title}} {{$x = structToSdict $x}} {{- $x.Set "Title" "No, YAGPDB rules!!!" -}} {{$x.Title}} {{$x}}` will return No, YAGPDB rules!!! and whole sdict-mapped _cembed_. |
| `toByte "arg"`         | Function converts input to a slice of bytes - meaning _\[]uint8_. `{{toByte "YAG€"}}` would output `[89 65 71 226 130 172]`. `toString` is capable of converting that slice back to _string_.                                                                                                                                                                                                                                               |
| `toDuration`           | Converts the argument, number or string to type _time.Duration_ - __ more duration related methods [here](https://pkg.go.dev/time#Duration). Number represents nanoseconds. String can be with time modifier (second, minute, hour, day etc) `s, m, h, d, w, mo, y`,without a modifier string will be converted to minutes. Usage:`(toDuration x)`. Example in section's [Snippets](functions.md#type-conversion-sections-snippets).        |
| `toFloat`              | Converts argument (_int_ or _string_ type of a number) to type _float64_.  Usage: `(toFloat x)`. Function will return 0, if type can't be converted to _float64_.                                                                                                                                                                                                                                                                           |
| `toInt`                | Converts something into an integer of type _int_. Usage: `(toInt x)`. Function will return 0, if type can't be converted to _int._                                                                                                                                                                                                                                                                                                          |
| `toInt64`              | Converts something into an _int64_. Usage: `(toInt64 x)`.  Function will return 0, if type can't be converted to _int64._                                                                                                                                                                                                                                                                                                                   |
| `toRune "arg"`         | Function converts input to a slice of runes - meaning _\[]int32_. `{{toRune "YAG€"}}`would output `[89 65 71 8364]`. These two functions - the one above, are good for further analysis of Unicode strings. `toString` is capable of converting that slice back to _string_.                                                                                                                                                                |
| `toString`             | Has alias `str`. Converts some other types into a _string_. Usage: `(toString x)`.                                                                                                                                                                                                                                                                                                                                                          |

#### Type conversion section's snippets:

* To demonstrate `toDuration`, outputs 12 hours from current time in UTC.\
  `{{(currentTime.Add (toDuration (mult 12 .TimeHour))).Format "15:04"}}`is the same as`{{(currentTime.Add (toDuration "12h")).Format "15:04"}}` or`{{(currentTime.Add (toDuration 43200000000000)).Format "15:04"}}`

{% hint style="success" %}
**Tip:** You can convert a Unicode code point back to its string equivalent using `printf "%c"`.  For example, `printf "%c" 99` would result in the string `c` as `99` is the Unicode code point for `c`.`printf` is briefly covered later on in the next section, further documentation can be found [here.](https://golang.org/pkg/fmt/) Cheat sheet [here](https://yourbasic.org/golang/fmt-printf-reference-cheat-sheet/).
{% endhint %}

### User functions

| **Function**                  | **Description**                                                                                                                                                                                                                                                                                                              |
| ----------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `userArg mention/userID`      | <p>Function that can be used to retrieve .User object from a mention or userID.</p><p><code>{{(userArg .User.ID).Mention}}</code> mentions triggering user. Explained more in <a href="functions.md#user-sections-snippets">this section's snippets</a>.</p>                                                                 |
| `pastUsernames userID offset` | <p>Returns a <em>slice</em> of type <em>[ ]*logs.CCNameChange</em> having fields .Name and .Time of previous 15 usernames and skips <code>offset</code> number in that list.</p><p><code>{{range pastUsernames .User.ID 0}}</code> <br><code>{{.Name}} - {{.Time.Format "Jan _2 2006"}}</code> <br><code>{{end}}</code> </p> |
| `pastNicknames userID offset` | Same as `pastUsernames`.                                                                                                                                                                                                                                                                                                     |

#### User section's snippets:

`{{(userArg .Guild.OwnerID).String}}` this template's action-structure returns Guild/Server owner's username and discriminator as of type _string_. First, `userArg` function is given `.Guild.OwnerID` as argument (what it does, explained in [templates section](./#guild-server)). The parentheses surrounding them make `userArg` function return `.User` as [.User object](./#user) which is handled further by `.String` method (ref.`.User.String`), giving a result like > `YAGPDB#8760`.
